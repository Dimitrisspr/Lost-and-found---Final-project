{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Desktop/final-project/Lost-and-found---Final-project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/User/Desktop/final-project/Lost-and-found---Final-project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/User/Desktop/final-project/Lost-and-found---Final-project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React from\"react\";import{useState,useEffect}from\"react\";import{MDBCard,MDBCardBody,MDBCardTitle,MDBCardText,MDBCardImage,MDBBtn,MDBModal,MDBModalDialog,MDBModalContent,MDBModalHeader,MDBModalTitle,MDBModalBody,MDBModalFooter}from\"mdb-react-ui-kit\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function LostPetsPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),lost=_useState2[0],setLost=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),modal=_useState4[0],setModal=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),petId=_useState6[0],setPetId=_useState6[1];var token=localStorage.getItem(\"token\");function getAllLostPets(){return _getAllLostPets.apply(this,arguments);}function _getAllLostPets(){_getAllLostPets=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(token){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return axios.get(\"http://localhost:8000/auth/getLostPets\",{headers:{Authorization:\"Bearer \".concat(token)}});case 4:response=_context.sent;setLost(response.data);case 6:case\"end\":return _context.stop();}},_callee);}));return _getAllLostPets.apply(this,arguments);}useEffect(function(){getAllLostPets();});function SendEmail(){return _SendEmail.apply(this,arguments);}function _SendEmail(){_SendEmail=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(token){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:_context2.next=4;return axios.post(\"http://localhost:8000/auth/send_email\",{petId:petId},{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(){return alert(\"Email sent to the owner\");}).catch(function(){return alert(\"Could not send email\");});case 4:case\"end\":return _context2.stop();}},_callee2);}));return _SendEmail.apply(this,arguments);}var toggleModal=function toggleModal(id){setPetId(id);console.log(petId);setModal(!modal);};return/*#__PURE__*/_jsxs(_Fragment,{children:[lost.map(function(pet){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(MDBCard,{children:/*#__PURE__*/_jsxs(MDBCardBody,{children:[/*#__PURE__*/_jsx(MDBCardImage,{src:pet.photo,width:200,height:200,alt:\"pet\",fluid:true}),/*#__PURE__*/_jsx(MDBCardTitle,{children:pet.name}),/*#__PURE__*/_jsx(MDBCardText,{children:pet.description}),/*#__PURE__*/_jsx(MDBCardText,{children:pet.location}),/*#__PURE__*/_jsxs(MDBCardText,{children:[\" \",pet.date&&pet.date.day&&pet.date.month&&pet.date.year?\"\".concat(pet.date.day,\"/\").concat(pet.date.month,\"/\").concat(pet.date.year):\"\"]}),/*#__PURE__*/_jsx(MDBCardText,{children:pet.time}),/*#__PURE__*/_jsx(MDBBtn,{onClick:function onClick(){return toggleModal(pet._id);},children:\"I found this pet!\"})]})})},pet._id);}),/*#__PURE__*/_jsx(MDBModal,{show:modal,setShow:setModal,tabIndex:\"-1\",children:/*#__PURE__*/_jsx(MDBModalDialog,{children:/*#__PURE__*/_jsxs(MDBModalContent,{children:[/*#__PURE__*/_jsxs(MDBModalHeader,{children:[/*#__PURE__*/_jsx(MDBModalTitle,{children:\"Warning\"}),/*#__PURE__*/_jsx(MDBBtn,{className:\"btn-close\",color:\"none\",onClick:toggleModal})]}),/*#__PURE__*/_jsx(MDBModalBody,{children:\"Pressing the button will send an email to the pets owner.Before you press the button make sure you have the right pet.\"}),/*#__PURE__*/_jsxs(MDBModalFooter,{children:[/*#__PURE__*/_jsx(MDBBtn,{color:\"secondary\",onClick:toggleModal,children:\"Close\"}),/*#__PURE__*/_jsx(MDBBtn,{onClick:function onClick(){SendEmail();toggleModal();},children:\"Send the email\"})]})]})})})]});}export default LostPetsPage;","map":{"version":3,"names":["axios","React","useState","useEffect","MDBCard","MDBCardBody","MDBCardTitle","MDBCardText","MDBCardImage","MDBBtn","MDBModal","MDBModalDialog","MDBModalContent","MDBModalHeader","MDBModalTitle","MDBModalBody","MDBModalFooter","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LostPetsPage","_useState","_useState2","_slicedToArray","lost","setLost","_useState3","_useState4","modal","setModal","_useState5","_useState6","petId","setPetId","token","localStorage","getItem","getAllLostPets","_getAllLostPets","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","abrupt","get","headers","Authorization","concat","sent","data","stop","SendEmail","_SendEmail","_callee2","_callee2$","_context2","post","then","alert","catch","toggleModal","id","console","log","children","map","pet","src","photo","width","height","alt","fluid","name","description","location","date","day","month","year","time","onClick","_id","show","setShow","tabIndex","className","color"],"sources":["C:/Users/User/Desktop/final-project/Lost-and-found---Final-project/client/src/Components/ProtectedComponents/LostPetsPage.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n  MDBCard,\r\n  MDBCardBody,\r\n  MDBCardTitle,\r\n  MDBCardText,\r\n  MDBCardImage,\r\n  MDBBtn,\r\n  MDBModal,\r\n  MDBModalDialog,\r\n  MDBModalContent,\r\n  MDBModalHeader,\r\n  MDBModalTitle,\r\n  MDBModalBody,\r\n  MDBModalFooter,\r\n} from \"mdb-react-ui-kit\";\r\n\r\nfunction LostPetsPage() {\r\n  const [lost, setLost] = useState([]);\r\n  const [modal, setModal] = useState(false);\r\n  const [petId, setPetId] = useState(\"\");\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  async function getAllLostPets() {\r\n    if (!token) {\r\n      return;\r\n    }\r\n\r\n    const response = await axios.get(\"http://localhost:8000/auth/getLostPets\", {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n    setLost(response.data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    getAllLostPets();\r\n  });\r\n\r\n  async function SendEmail() {\r\n    if (!token) {\r\n      return;\r\n    }\r\n\r\n    await axios\r\n      .post(\r\n        \"http://localhost:8000/auth/send_email\",\r\n        { petId: petId },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      )\r\n      .then(() => alert(\"Email sent to the owner\"))\r\n      .catch(() => alert(\"Could not send email\"));\r\n  }\r\n\r\n  const toggleModal = (id) => {\r\n    setPetId(id);\r\n\r\n    console.log(petId);\r\n    setModal(!modal);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {lost.map((pet) => (\r\n        <div key={pet._id}>\r\n          <MDBCard>\r\n            <MDBCardBody>\r\n              <MDBCardImage\r\n                src={pet.photo}\r\n                width={200}\r\n                height={200}\r\n                alt=\"pet\"\r\n                fluid\r\n              />\r\n              <MDBCardTitle>{pet.name}</MDBCardTitle>\r\n              <MDBCardText>{pet.description}</MDBCardText>\r\n              <MDBCardText>{pet.location}</MDBCardText>\r\n              <MDBCardText>\r\n                {\" \"}\r\n                {pet.date && pet.date.day && pet.date.month && pet.date.year\r\n                  ? `${pet.date.day}/${pet.date.month}/${pet.date.year}`\r\n                  : \"\"}\r\n              </MDBCardText>\r\n              <MDBCardText>{pet.time}</MDBCardText>\r\n              <MDBBtn onClick={() => toggleModal(pet._id)}>\r\n                I found this pet!\r\n              </MDBBtn>\r\n            </MDBCardBody>\r\n          </MDBCard>\r\n        </div>\r\n      ))}\r\n      <MDBModal show={modal} setShow={setModal} tabIndex=\"-1\">\r\n        <MDBModalDialog>\r\n          <MDBModalContent>\r\n            <MDBModalHeader>\r\n              <MDBModalTitle>Warning</MDBModalTitle>\r\n              <MDBBtn\r\n                className=\"btn-close\"\r\n                color=\"none\"\r\n                onClick={toggleModal}\r\n              ></MDBBtn>\r\n            </MDBModalHeader>\r\n            <MDBModalBody>\r\n              Pressing the button will send an email to the pets owner.Before\r\n              you press the button make sure you have the right pet.\r\n            </MDBModalBody>\r\n\r\n            <MDBModalFooter>\r\n              <MDBBtn color=\"secondary\" onClick={toggleModal}>\r\n                Close\r\n              </MDBBtn>\r\n              <MDBBtn\r\n                onClick={() => {\r\n                  SendEmail();\r\n                  toggleModal();\r\n                }}\r\n              >\r\n                Send the email\r\n              </MDBBtn>\r\n            </MDBModalFooter>\r\n          </MDBModalContent>\r\n        </MDBModalDialog>\r\n      </MDBModal>\r\n    </>\r\n  );\r\n}\r\nexport default LostPetsPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}